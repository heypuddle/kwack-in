<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title> Flappy Duck</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; touch-action: manipulation; }
    
    body {
      background: #1a1a2e;
      overflow: hidden;
      font-family: -apple-system, sans-serif;
      user-select: none;
      -webkit-user-select: none;
    }
    
    #game {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, #87CEEB 0%, #E0F7FA 100%);
    }
    
    #duck {
      position: absolute;
      font-size: 50px;
      left: 50px;
      top: 50%;
      z-index: 10;
      transition: transform 0.1s;
    }
    
    .pipe {
      position: absolute;
      width: 70px;
      background: linear-gradient(to right, #2E7D32, #4CAF50, #2E7D32);
      border-radius: 10px;
    }
    
    .pipe-top {
      top: 0;
      border-radius: 0 0 15px 15px;
    }
    
    .pipe-bottom {
      bottom: 0;
      border-radius: 15px 15px 0 0;
    }
    
    #score {
      position: absolute;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 60px;
      font-weight: bold;
      color: #fff;
      text-shadow: 3px 3px 0 #000;
      z-index: 20;
    }
    
    #startScreen, #gameOverScreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 30;
    }
    
    #startScreen h1, #gameOverScreen h1 {
      font-size: 48px;
      color: #FFD700;
      text-shadow: 3px 3px 0 #000;
      margin-bottom: 20px;
    }
    
    #startScreen p, #gameOverScreen p {
      color: #fff;
      font-size: 20px;
      margin-bottom: 30px;
    }
    
    #startBtn, #restartBtn {
      background: #FFD700;
      border: none;
      padding: 20px 50px;
      font-size: 24px;
      font-weight: bold;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 5px 0 #B8860B;
    }
    
    #startBtn:active, #restartBtn:active {
      transform: translateY(5px);
      box-shadow: none;
    }
    
    #finalScore {
      font-size: 36px;
      color: #fff;
      margin-bottom: 20px;
    }
    
    .hidden { display: none !important; }
    
    #ground {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 80px;
      background: linear-gradient(to bottom, #8B4513, #A0522D);
      border-top: 5px solid #654321;
    }
    
    #highScore {
      position: absolute;
      top: 120px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 20px;
      color: #FFD700;
      text-shadow: 2px 2px 0 #000;
    }
  </style>
</head>
<body>
  <div id="game">
    <div id="score">0</div>
    <div id="highScore">Best: 0</div>
    <div id="duck"></div>
    <div id="ground"></div>
    
    <div id="startScreen">
      <h1> Flappy Duck </h1>
      <p>Tap or click to fly!</p>
      <button id="startBtn">START</button>
    </div>
    
    <div id="gameOverScreen" class="hidden">
      <h1>Game Over!</h1>
      <div id="finalScore">Score: 0</div>
      <button id="restartBtn">PLAY AGAIN</button>
    </div>
  </div>
  
  <script>
    const game = document.getElementById('game');
    const duck = document.getElementById('duck');
    const scoreEl = document.getElementById('score');
    const highScoreEl = document.getElementById('highScore');
    const startScreen = document.getElementById('startScreen');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const finalScoreEl = document.getElementById('finalScore');
    
    let duckY = window.innerHeight / 2;
    let velocity = 0;
    let gravity = 0.5;
    let jumpStrength = -12;
    let pipes = [];
    let score = 0;
    let highScore = localStorage.getItem('flappyDuckHighScore') || 0;
    let gameRunning = false;
    let pipeSpeed = 4;
    let pipeSpawnTimer = 0;
    let pipeSpawnInterval = 120;
    let animationId;
    let gameHeight = window.innerHeight - 80;
    
    highScoreEl.textContent = 'Best: ' + highScore;
    
    function startGame() {
      duckY = window.innerHeight / 2;
      velocity = 0;
      score = 0;
      pipeSpeed = 4;
      pipeSpawnInterval = 120;
      pipeSpawnTimer = 0;
      pipes.forEach(p => p.remove());
      pipes = [];
      scoreEl.textContent = '0';
      gameRunning = true;
      startScreen.classList.add('hidden');
      gameOverScreen.classList.add('hidden');
      gameHeight = window.innerHeight - 80;
      loop();
    }
    
    function jump() {
      if (!gameRunning) return;
      velocity = jumpStrength;
    }
    
    function createPipe() {
      const gap = 160;
      const minPipeHeight = 100;
      const maxPipeHeight = gameHeight - gap - minPipeHeight;
      const topHeight = Math.random() * (maxPipeHeight - minPipeHeight) + minPipeHeight;
      
      const pipe = document.createElement('div');
      pipe.className = 'pipe pipe-top';
      pipe.style.height = topHeight + 'px';
      pipe.style.right = '-70px';
      game.appendChild(pipe);
      
      const pipe2 = document.createElement('div');
      pipe2.className = 'pipe pipe-bottom';
      pipe2.style.height = (gameHeight - topHeight - gap) + 'px';
      pipe2.style.right = '-70px';
      game.appendChild(pipe2);
      
      pipes.push({ el: pipe, el2: pipe2, x: window.innerWidth, passed: false });
    }
    
    function gameOver() {
      gameRunning = false;
      cancelAnimationFrame(animationId);
      
      if (score > highScore) {
        highScore = score;
        localStorage.setItem('flappyDuckHighScore', highScore);
        highScoreEl.textContent = 'Best: ' + highScore;
      }
      
      finalScoreEl.textContent = 'Score: ' + score;
      gameOverScreen.classList.remove('hidden');
    }
    
    function loop() {
      if (!gameRunning) return;
      
      velocity += gravity;
      duckY += velocity;
      
      // Ground collision
      if (duckY > gameHeight - 40) {
        duckY = gameHeight - 40;
        gameOver();
        return;
      }
      
      // Ceiling collision
      if (duckY < 0) {
        duckY = 0;
        velocity = 0;
      }
      
      duck.style.top = duckY + 'px';
      duck.style.transform = velocity > 0 ? 'rotate(30deg)' : 'rotate(-30deg)';
      
      // Spawn pipes
      pipeSpawnTimer++;
      if (pipeSpawnTimer >= pipeSpawnInterval) {
        createPipe();
        pipeSpawnTimer = 0;
        // Gradually increase speed
        pipeSpeed = Math.min(8, 4 + score * 0.1);
      }
      
      // Move pipes
      pipes.forEach((pipe, index) => {
        pipe.x -= pipeSpeed;
        pipe.el.style.right = (window.innerWidth - pipe.x) + 'px';
        pipe.el2.style.right = (window.innerWidth - pipe.x) + 'px';
        
        const pipeRight = pipe.x + 70;
        const duckLeft = 50;
        const duckRight = 100;
        const duckTop = duckY;
        const duckBottom = duckY + 40;
        
        const topPipeBottom = parseInt(pipe.el.style.height);
        const bottomPipeTop = gameHeight - parseInt(pipe.el2.style.height);
        
        // Check collision
        if (duckRight > pipe.x && duckLeft < pipeRight) {
          if (duckTop < topPipeBottom || duckBottom > bottomPipeTop) {
            gameOver();
            return;
          }
        }
        
        // Score
        if (!pipe.passed && duckLeft > pipeRight) {
          score++;
          scoreEl.textContent = score;
          pipe.passed = true;
        }
        
        // Remove off-screen pipes
        if (pipe.x < -100) {
          pipe.el.remove();
          pipe.el2.remove();
          pipes.splice(index, 1);
        }
      });
      
      animationId = requestAnimationFrame(loop);
    }
    
    // Controls
    document.addEventListener('click', (e) => {
      if (e.target.id !== 'startBtn' && e.target.id !== 'restartBtn') {
        jump();
      }
    });
    
    document.addEventListener('touchstart', (e) => {
      if (e.target.id !== 'startBtn' && e.target.id !== 'restartBtn') {
        e.preventDefault();
        jump();
      }
    }, { passive: false });
    
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        e.preventDefault();
        if (!gameRunning && startScreen.classList.contains('hidden') && gameOverScreen.classList.contains('hidden')) {
          return;
        }
        if (gameOverScreen.classList.contains('hidden')) {
          jump();
        }
      }
    });
    
    startBtn.addEventListener('click', startGame);
    restartBtn.addEventListener('click', startGame);
  </script>
</body>
</html>
